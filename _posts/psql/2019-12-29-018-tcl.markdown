---
layout: post
title: "Transaction Control Language di PostgreSQL"
date: 2019-12-29T20:07:46+07:00
lang: psql
categories:
- RDBMS
- PostgreSQL
refs: []
youtube: https://www.youtube.com/watch?v=tQHfL3lpBz8&list=PLV1-tdmPblvypZXSk2GC932nludT345xk&index=24
comments: true
---

Transaction Control atau singkatan dari TCL yaitu perintah untuk kendali terhadap suatu perubahan data di Database contoh menginpan data secara permanent yang kita kenal sebagai `commit` dan untuk mengembalikan ke kondisi sebelumnya yaitu `rollback` dalam suatu transaksi.

Fungsi utama menggunakan transaction pada Database adalah terkadang jika kita membuat aplikasi, kita tidah hanya menulis di 1 s/d 2 tabel terkadang bisa 10 bahkan ratusan tabel dalam sekali proses bisnis. Contohnya kita transfer antar bank di ATM nah jadi klo dari saldo kita udah ter-debet sedangkan di saldo si penerima tidak bertambah lalu kemana saldonya??? nah ibaratnya seperti itu jadi klo terjadi gagal transaksi maka system harus mengembalikan saldo pengirim.

## Rollback

Penggunaan rollback, contohnya seperit berikut, masih di table yang sama yaitu `regions`

```sql
begin;
-- insert new data
INSERT INTO regions (region_id ,region_name) VALUES (6, 'Asia Tenggara');
-- select * from regions to show data

-- then rollback
rollback;

-- select * from regions to show data after rollback
select * from regions
```

hasilnya seperti berikut:

```postgresql-console
bootcamp=# begin;
BEGIN

bootcamp=# INSERT INTO regions (region_id ,region_name) VALUES (6, 'Asia Tenggara');
INSERT 0 1

bootcamp=# select * from regions;
 region_id |      region_name       
-----------+------------------------
         2 | Americas
         3 | Asia
         4 | Middle East and Africa
         1 | Europe
         6 | Asia Tenggara
(5 rows)

bootcamp=# rollback;
ROLLBACK

bootcamp=# select * from regions;
 region_id |      region_name       
-----------+------------------------
         2 | Americas
         3 | Asia
         4 | Middle East and Africa
         1 | Europe
(4 rows)
```

## Commit

Penggunaan commit, contohnya seperit berikut masih di table yang sama yaitu `regions`

```sql
begin;
-- insert new data
INSERT INTO regions (region_id ,region_name) VALUES (6, 'Asia Tenggara');
-- select * from regions to show data

-- then commit / end;
COMMIT;

-- select * from regions to show data after commit
select * from regions;
```
